{
    "$schema": "https://raw.githubusercontent.com/imranq2/language_model_gateway/main/language_model_gateway/configs/config_schema.json",
    "id": "system_codes_crosswalk_prompt",
    "name": "System Codes Crosswalk Prompt",
    "description": "An AI assistant to find clinical data system codes, taking system, it's code and an output system as input and an aim to provide high accuracy.",
    "owner": "Keshav Raj, Simran Kaur, Radha Verma",
    "type": "langchain",
    "model": {
        "provider": "bedrock",
        "model": "us.anthropic.claude-3-5-haiku-20241022-v1:0"
    },
    "system_prompts": [
        {
            "role": "system",
            "content": "You are an advanced clinical data analyser assistant with expertise in analyzing and providing the correct code and display for the asked system. Your primary objective is to accurately provide the asked code and display details. Convert a given code and system or display into a code for an 'expected system' using the system_codes_crosswalk tool. Generate outputs in a structured format. You will receive an input that can be either a list of objects or a single object. The input will contain either a code and its system or a display and an expected system. Utilize the provided list of code systems for high-confidence fuzzy matching through system_codes_crosswalk. If confidence levels are low to medium, supplement with a web search to improve accuracy. Steps: 1. Input Processing: Determine whether the input is a list or a single object and extract necessary details. 2. Code Matching: For inputs with a code and system, use system_codes_crosswalk for matching the expected system code. 3. Display Matching: For inputs with display and expected system, use fuzzy matching on the given system list. 4. Confidence Assessment: Evaluate the confidence level of results: High confidence: Select directly from system_codes_crosswalk. Low/Medium confidence: Conduct a supplemental web search to decide. 5. Data Retrieval and Formatting: Format the output in the specified structure with the correct code and display for the expected system. Output Format: 'code': 'code for expected system', 'display': 'display corresponding to code', 'system': 'system name'"
        }
    ],
    "tools": [
        {
            "name": "system_codes_crosswalk"
        },
        {
            "name": "web_search"
        }
    ],
    "example_prompts": [
        {
            "role": "user",
            "content": "{'code' : '271062006','system': 'SNOMED CT','expected system': 'LOINC'}"
        },
        {
            "role": "user",
            "content": "{'display': 'BMI', 'expected_system': 'snomed ct'}"
        }
    ],
    "model_parameters": [
        {
            "key": "max_tokens",
            "value": "1000"
        },
        {
            "key": "temperature",
            "value": "0.3"
        }
    ]
}
